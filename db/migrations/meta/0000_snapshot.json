{
  "id": "f1428188-1887-4249-a639-da3fc0151a60",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.question_items": {
      "name": "question_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "parent_id": {
          "name": "parent_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "label": {
          "name": "label",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "subject": {
          "name": "subject",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true
        },
        "level": {
          "name": "level",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true
        },
        "topics": {
          "name": "topics",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'"
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "q_type": {
          "name": "q_type",
          "type": "question_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'"
        },
        "context": {
          "name": "context",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "question_text": {
          "name": "question_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reference_images": {
          "name": "reference_images",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'"
        },
        "max_marks": {
          "name": "max_marks",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "grading_guidelines": {
          "name": "grading_guidelines",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "model_answer": {
          "name": "model_answer",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "rubric": {
          "name": "rubric",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "visibility": {
          "name": "visibility",
          "type": "visibility",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'private'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "question_items_parent_id_question_items_id_fk": {
          "name": "question_items_parent_id_question_items_id_fk",
          "tableFrom": "question_items",
          "tableTo": "question_items",
          "columnsFrom": [
            "parent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "public.paper_question_items": {
      "name": "paper_question_items",
      "schema": "",
      "columns": {
        "paper_id": {
          "name": "paper_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "question_item_id": {
          "name": "question_item_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "page_start": {
          "name": "page_start",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "page_end": {
          "name": "page_end",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "paper_question_items_paper_id_position_idx": {
          "name": "paper_question_items_paper_id_position_idx",
          "columns": [
            {
              "expression": "paper_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "position",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "paper_question_items_paper_id_papers_id_fk": {
          "name": "paper_question_items_paper_id_papers_id_fk",
          "tableFrom": "paper_question_items",
          "tableTo": "papers",
          "columnsFrom": [
            "paper_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "paper_question_items_question_item_id_question_items_id_fk": {
          "name": "paper_question_items_question_item_id_question_items_id_fk",
          "tableFrom": "paper_question_items",
          "tableTo": "question_items",
          "columnsFrom": [
            "question_item_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "paper_question_items_paper_id_question_item_id_pk": {
          "name": "paper_question_items_paper_id_question_item_id_pk",
          "columns": [
            "paper_id",
            "question_item_id"
          ]
        }
      },
      "uniqueConstraints": {}
    },
    "public.papers": {
      "name": "papers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subject": {
          "name": "subject",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": false
        },
        "level": {
          "name": "level",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": false
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "total_marks": {
          "name": "total_marks",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "visibility": {
          "name": "visibility",
          "type": "visibility",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'private'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "public.answer_artifacts": {
      "name": "answer_artifacts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "student_id": {
          "name": "student_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "artifact_type": {
          "name": "artifact_type",
          "type": "artifact_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "source": {
          "name": "source",
          "type": "artifact_source",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "storage_url": {
          "name": "storage_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "extracted_text": {
          "name": "extracted_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "raw_payload": {
          "name": "raw_payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "public.answers": {
      "name": "answers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "student_id": {
          "name": "student_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "question_item_id": {
          "name": "question_item_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "paper_id": {
          "name": "paper_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "attempt_number": {
          "name": "attempt_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "mode": {
          "name": "mode",
          "type": "answer_mode",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'practice'"
        },
        "canonical_text": {
          "name": "canonical_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "submission_status": {
          "name": "submission_status",
          "type": "submission_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "grading_status": {
          "name": "grading_status",
          "type": "grading_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "answers_question_item_id_question_items_id_fk": {
          "name": "answers_question_item_id_question_items_id_fk",
          "tableFrom": "answers",
          "tableTo": "question_items",
          "columnsFrom": [
            "question_item_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "answers_paper_id_papers_id_fk": {
          "name": "answers_paper_id_papers_id_fk",
          "tableFrom": "answers",
          "tableTo": "papers",
          "columnsFrom": [
            "paper_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "public.answer_artifact_links": {
      "name": "answer_artifact_links",
      "schema": "",
      "columns": {
        "answer_id": {
          "name": "answer_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "artifact_id": {
          "name": "artifact_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "answer_artifact_links_answer_id_position_idx": {
          "name": "answer_artifact_links_answer_id_position_idx",
          "columns": [
            {
              "expression": "answer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "position",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "answer_artifact_links_answer_id_answers_id_fk": {
          "name": "answer_artifact_links_answer_id_answers_id_fk",
          "tableFrom": "answer_artifact_links",
          "tableTo": "answers",
          "columnsFrom": [
            "answer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "answer_artifact_links_artifact_id_answer_artifacts_id_fk": {
          "name": "answer_artifact_links_artifact_id_answer_artifacts_id_fk",
          "tableFrom": "answer_artifact_links",
          "tableTo": "answer_artifacts",
          "columnsFrom": [
            "artifact_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "answer_artifact_links_answer_id_artifact_id_pk": {
          "name": "answer_artifact_links_answer_id_artifact_id_pk",
          "columns": [
            "answer_id",
            "artifact_id"
          ]
        }
      },
      "uniqueConstraints": {}
    },
    "public.evaluations": {
      "name": "evaluations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "answer_id": {
          "name": "answer_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "evaluator_type": {
          "name": "evaluator_type",
          "type": "evaluator_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "evaluator_id": {
          "name": "evaluator_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "score": {
          "name": "score",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "max_marks": {
          "name": "max_marks",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "rubric_breakdown": {
          "name": "rubric_breakdown",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "labels": {
          "name": "labels",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'"
        },
        "model_name": {
          "name": "model_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "model_version": {
          "name": "model_version",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "prompt_version": {
          "name": "prompt_version",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "question_snapshot": {
          "name": "question_snapshot",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "feedback_student": {
          "name": "feedback_student",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_final": {
          "name": "is_final",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "evaluations_answer_id_answers_id_fk": {
          "name": "evaluations_answer_id_answers_id_fk",
          "tableFrom": "evaluations",
          "tableTo": "answers",
          "columnsFrom": [
            "answer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    }
  },
  "enums": {
    "public.question_type": {
      "name": "question_type",
      "schema": "public",
      "values": [
        "mcq",
        "short_answer",
        "structured",
        "essay"
      ]
    },
    "public.visibility": {
      "name": "visibility",
      "schema": "public",
      "values": [
        "private",
        "org",
        "public"
      ]
    },
    "public.artifact_source": {
      "name": "artifact_source",
      "schema": "public",
      "values": [
        "upload",
        "camera",
        "canvas"
      ]
    },
    "public.artifact_type": {
      "name": "artifact_type",
      "schema": "public",
      "values": [
        "image",
        "text"
      ]
    },
    "public.answer_mode": {
      "name": "answer_mode",
      "schema": "public",
      "values": [
        "practice",
        "exam",
        "homework"
      ]
    },
    "public.grading_status": {
      "name": "grading_status",
      "schema": "public",
      "values": [
        "pending",
        "in_progress",
        "graded",
        "failed"
      ]
    },
    "public.submission_status": {
      "name": "submission_status",
      "schema": "public",
      "values": [
        "draft",
        "submitted"
      ]
    },
    "public.evaluator_type": {
      "name": "evaluator_type",
      "schema": "public",
      "values": [
        "ai",
        "teacher",
        "parent"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}