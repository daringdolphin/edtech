/*
<ai_context>
Global styles for the app.
Design tokens based on MathCraft design guidelines.
</ai_context>
*/

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Merriweather:wght@400;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* MathCraft Color System - Light Mode */
    /* Cool academic blues with neutral grays */
    --background: 215 35% 97%;
    --foreground: 222 32% 12%;
    --card: 0 0% 100%;
    --card-foreground: 222 32% 12%;
    --popover: 0 0% 100%;
    --popover-foreground: 222 32% 12%;
    --primary: 221 70% 50%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 28% 96%;
    --secondary-foreground: 222 32% 15%;
    --muted: 214 28% 94%;
    --muted-foreground: 215 15% 46%;
    --accent: 214 50% 95%;
    --accent-foreground: 222 32% 15%;
    --destructive: 0 72% 58%;
    --destructive-foreground: 210 40% 98%;
    --border: 214 26% 88%;
    --input: 214 26% 92%;
    --ring: 221 75% 55%;

    /* Sidebar - Light */
    --sidebar-background: 215 35% 97%;
    --sidebar-foreground: 222 32% 12%;
    --sidebar-primary: 221 70% 50%;
    --sidebar-primary-foreground: 210 40% 98%;
    --sidebar-accent: 214 50% 95%;
    --sidebar-accent-foreground: 222 32% 15%;
    --sidebar-border: 214 26% 88%;
    --sidebar-ring: 221 75% 55%;

    /* Diagram-specific tokens */
    --diagram-grid: #E5E7EB;
    --diagram-selection: 221 83% 60%;

    /* Border Radius */
    --radius: 0.5rem;
    --radius-sm: 6px;
    --radius-md: 8px;
    --radius-lg: 12px;
    --radius-xl: 16px;

    /* Motion/Transition Tokens */
    --duration-fast: 120ms;
    --duration-base: 200ms;
    --duration-slow: 320ms;
    --easing-standard: cubic-bezier(0.4, 0, 0.2, 1);
    --easing-decelerate: cubic-bezier(0, 0, 0.2, 1);
    --easing-accelerate: cubic-bezier(0.4, 0, 1, 1);

    /* Elevation/Shadow Tokens */
    --shadow-xs: 0 1px 2px rgba(15, 23, 42, 0.06);
    --shadow-sm: 0 2px 6px rgba(15, 23, 42, 0.08);
    --shadow-md: 0 6px 18px rgba(15, 23, 42, 0.12);
    --shadow-lg: 0 12px 32px rgba(15, 23, 42, 0.18);

    /* Chart colors */
    --chart-1: 221 70% 50%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
  }

  .dark {
    /* MathCraft Color System - Dark Mode */
    --background: 222 60% 6%;
    --foreground: 210 40% 96%;
    --card: 222 60% 7%;
    --card-foreground: 210 40% 96%;
    --popover: 222 60% 7%;
    --popover-foreground: 210 40% 96%;
    --primary: 217 85% 68%;
    --primary-foreground: 222 47% 11%;
    --secondary: 220 26% 18%;
    --secondary-foreground: 210 40% 96%;
    --muted: 220 24% 16%;
    --muted-foreground: 215 20% 70%;
    --accent: 220 30% 20%;
    --accent-foreground: 210 40% 96%;
    --destructive: 0 65% 40%;
    --destructive-foreground: 210 40% 98%;
    --border: 220 26% 24%;
    --input: 220 26% 20%;
    --ring: 221 80% 65%;

    /* Sidebar - Dark */
    --sidebar-background: 222 60% 6%;
    --sidebar-foreground: 210 40% 96%;
    --sidebar-primary: 217 85% 68%;
    --sidebar-primary-foreground: 222 47% 11%;
    --sidebar-accent: 220 30% 20%;
    --sidebar-accent-foreground: 210 40% 96%;
    --sidebar-border: 220 26% 24%;
    --sidebar-ring: 221 80% 65%;

    /* Diagram-specific tokens - Dark */
    --diagram-grid: hsl(220, 26%, 24%);
    --diagram-selection: 221 83% 60%;

    /* Chart colors - Dark */
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-background text-foreground font-sans antialiased;
  }

  /* Typography defaults */
  h1, h2, h3, h4, h5, h6 {
    @apply font-serif font-semibold leading-tight;
  }

  code, pre, kbd, samp {
    @apply font-mono;
  }
}

@layer utilities {
  /* Motion utility classes */
  .transition-fast {
    transition-duration: var(--duration-fast);
    transition-timing-function: var(--easing-standard);
  }

  .transition-base {
    transition-duration: var(--duration-base);
    transition-timing-function: var(--easing-standard);
  }

  .transition-slow {
    transition-duration: var(--duration-slow);
    transition-timing-function: var(--easing-standard);
  }

  .ease-decelerate {
    transition-timing-function: var(--easing-decelerate);
  }

  .ease-accelerate {
    transition-timing-function: var(--easing-accelerate);
  }

  /* Elevation utility classes */
  .elevation-none {
    box-shadow: none;
  }

  .elevation-xs {
    box-shadow: var(--shadow-xs);
  }

  .elevation-sm {
    box-shadow: var(--shadow-sm);
  }

  .elevation-md {
    box-shadow: var(--shadow-md);
  }

  .elevation-lg {
    box-shadow: var(--shadow-lg);
  }

  /* Worksheet canvas max-width (A4 mimic ~793px) */
  .worksheet-canvas {
    max-width: 793px;
  }
}

@layer components {
  /* Motion animations */
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes scale-in {
    from {
      opacity: 0;
      transform: scale(0.96);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .animate-fade-in {
    animation: fade-in var(--duration-base) var(--easing-decelerate);
  }

  .animate-scale-in {
    animation: scale-in var(--duration-base) var(--easing-decelerate);
  }

  /* TipTap Editor Styles */
  .ProseMirror {
    @apply outline-none;
  }

  .ProseMirror > * + * {
    margin-top: 0.75em;
  }

  .ProseMirror p.is-editor-empty:first-child::before {
    @apply text-muted-foreground pointer-events-none float-left h-0;
    content: attr(data-placeholder);
  }

  /* TipTap Selection */
  .ProseMirror ::selection {
    @apply bg-primary/20;
  }

  /* TipTap Horizontal Rule */
  .ProseMirror hr {
    @apply my-6 border-t-2 border-border;
  }

  /* TipTap Spacer Block */
  .ProseMirror .spacer-block {
    @apply my-2 w-full rounded border border-dashed border-muted-foreground/30 bg-muted/20;
    transition: background-color var(--duration-fast) var(--easing-standard);
  }

  .ProseMirror .spacer-block:hover {
    @apply bg-muted/40 border-muted-foreground/50;
  }

  .ProseMirror .spacer-block.ProseMirror-selectednode {
    @apply bg-primary/10 border-primary/50;
  }

  /* TipTap Logo Block */
  .ProseMirror .logo-block {
    @apply my-4 py-2;
  }

  .ProseMirror .logo-block img {
    @apply max-h-32 object-contain;
  }

  .ProseMirror .logo-block.ProseMirror-selectednode {
    @apply ring-2 ring-primary/50 ring-offset-2 rounded;
  }

  /* TipTap Image Block */
  .ProseMirror img {
    @apply rounded-lg;
    max-width: 100%;
    height: auto;
  }

  .ProseMirror img.ProseMirror-selectednode {
    @apply ring-2 ring-primary ring-offset-2;
  }

  /* TipTap Blockquote */
  .ProseMirror blockquote {
    @apply border-l-4 border-primary/40 pl-4 italic text-muted-foreground;
  }

  /* TipTap Code */
  .ProseMirror code {
    @apply rounded bg-muted px-1.5 py-0.5 font-mono text-sm;
  }

  .ProseMirror pre {
    @apply rounded-lg bg-muted p-4 font-mono text-sm;
  }

  .ProseMirror pre code {
    @apply bg-transparent p-0;
  }

  /* TipTap Lists */
  .ProseMirror ul,
  .ProseMirror ol {
    @apply pl-6;
  }

  .ProseMirror ul {
    @apply list-disc;
  }

  .ProseMirror ol {
    @apply list-decimal;
  }

  .ProseMirror li {
    @apply my-1;
  }

  /* TipTap Headings */
  .ProseMirror h1 {
    @apply text-3xl font-bold tracking-tight font-serif;
  }

  .ProseMirror h2 {
    @apply text-2xl font-semibold tracking-tight font-serif;
  }

  .ProseMirror h3 {
    @apply text-xl font-semibold tracking-tight font-serif;
  }

  /* TipTap Drop Cursor */
  .ProseMirror-dropcursor {
    @apply border-primary;
  }

  /* TipTap Gap Cursor */
  .ProseMirror-gapcursor:after {
    @apply border-t-2 border-primary;
  }
}
